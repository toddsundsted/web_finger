{"repository_name":"web_finger","body":"# web_finger\n\n[![GitHub Release](https://img.shields.io/github/release/toddsundsted/web_finger.svg)](https://github.com/toddsundsted/web_finger/releases)\n[![Build Status](https://github.com/toddsundsted/web_finger/actions/workflows/ci.yml/badge.svg)](https://github.com/toddsundsted/web_finger/actions)\n[![Documentation](https://img.shields.io/badge/docs-available-brightgreen.svg)](https://toddsundsted.github.io/web_finger/)\n\nA [WebFinger](https://tools.ietf.org/html/rfc7033) client for Crystal.\n\n## Installation\n\n1. Add the dependency to your `shard.yml`:\n\n```yaml\ndependencies:\n  web_finger:\n    github: toddsundsted/web_finger\n```\n\n2. Run `shards install`\n\n## Usage\n\n```crystal\nrequire \"web_finger\"\n\nw = WebFinger.query(\"acct:toddsundsted@epiktistes.com\") # => #<WebFinger::Result:0x108d...>\nw.link(\"http://webfinger.net/rel/profile-page\").href # => \"https://epiktistes.com/@toddsundsted\"\n```\n\n## Contributors\n\n- [Todd Sundsted](https://github.com/toddsundsted) - creator and maintainer\n","program":{"html_id":"web_finger/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"web_finger","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"web_finger/WebFinger","path":"WebFinger.html","kind":"module","full_name":"WebFinger","name":"WebFinger","abstract":false,"locations":[{"filename":"src/web_finger.cr","line_number":3,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger.cr#L3"},{"filename":"src/web_finger/client.cr","line_number":4,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/client.cr#L4"},{"filename":"src/web_finger/result.cr","line_number":4,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L4"}],"repository_name":"web_finger","program":false,"enum":false,"alias":false,"const":false,"doc":"A [WebFinger](https://tools.ietf.org/html/rfc7033)\nclient for Crystal.","summary":"<p>A <a href=\"https://tools.ietf.org/html/rfc7033\">WebFinger</a> client for Crystal.</p>","class_methods":[{"html_id":"query(account,*args)-class-method","name":"query","doc":"Returns the result of querying for the specified account.\n\nThe account should conform to the ['acct' URI\nScheme](https://tools.ietf.org/html/rfc7565).\n\n    w = WebFinger.query(\"acct:toddsundsted@epiktistes.com\") # => #<WebFinger::Result:0x108d...>\n    w.link(\"http://webfinger.net/rel/profile-page\").href # => \"https://epiktistes.com/@toddsundsted\"\n\nRaises `WebFinger::NotFoundError` if the account does not exist and\n`WebFinger::RedirectionError` if redirection fails.  Otherwise,\nreturns `WebFinger::Result`.\n","summary":"<p>Returns the result of querying for the specified account.</p>","abstract":false,"args":[{"name":"account","external_name":"account","restriction":""},{"name":"args","external_name":"args","restriction":""}],"args_string":"(account, *args)","args_html":"(account, *args)","location":{"filename":"src/web_finger.cr","line_number":16,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger.cr#L16"},"def":{"name":"query","args":[{"name":"account","external_name":"account","restriction":""},{"name":"args","external_name":"args","restriction":""}],"splat_index":1,"visibility":"Public","body":"WebFinger::Client.query(account, *args)"}}],"types":[{"html_id":"web_finger/WebFinger/Client","path":"WebFinger/Client.html","kind":"module","full_name":"WebFinger::Client","name":"Client","abstract":false,"locations":[{"filename":"src/web_finger/client.cr","line_number":18,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/client.cr#L18"}],"repository_name":"web_finger","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"ACCOUNT_REGEX","name":"ACCOUNT_REGEX","value":"/\\\n      ^https:\\/\\/(?<host>[^\\/]+)(\\/.*)?$|\n      ^([^@]+)@(?<host>[^@]+)$|\n      ^(?<host>.+)$\n    /mx"}],"namespace":{"html_id":"web_finger/WebFinger","kind":"module","full_name":"WebFinger","name":"WebFinger"},"doc":"The client.","summary":"<p>The client.</p>","class_methods":[{"html_id":"query(account,attempts=10)-class-method","name":"query","doc":"Returns the result of querying for the specified account.\n\nThe account should conform to the ['acct' URI Scheme](https://tools.ietf.org/html/rfc7565).\nLiberal validation of this format eases federation with other popular servers.\n\n    w = WebFinger.query(\"acct:toddsundsted@epiktistes.com\") # => #<WebFinger::Result:0x108d...>\n    w.link(\"http://webfinger.net/rel/profile-page\").href # => \"https://epiktistes.com/@toddsundsted\"\n\nRaises `WebFinger::NotFoundError` if the account does not exist\nand `WebFinger::RedirectionError` if redirection failed.\nOtherwise, returns `WebFinger::Result`.\n","summary":"<p>Returns the result of querying for the specified account.</p>","abstract":false,"args":[{"name":"account","external_name":"account","restriction":""},{"name":"attempts","default_value":"10","external_name":"attempts","restriction":""}],"args_string":"(account, attempts = 10)","args_html":"(account, attempts = <span class=\"n\">10</span>)","location":{"filename":"src/web_finger/client.cr","line_number":37,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/client.cr#L37"},"def":{"name":"query","args":[{"name":"account","external_name":"account","restriction":""},{"name":"attempts","default_value":"10","external_name":"attempts","restriction":""}],"visibility":"Public","body":"begin\n  if account =~ ACCOUNT_REGEX\n  else\n    raise(Error.new(\"invalid account: #{account}\"))\n  end\n  host = $~[\"host\"]?\n  template = begin\n    ((HostMeta.query(host)).links(\"lrdd\")).first.template.not_nil!\n  rescue HostMeta::Error | NilAssertionError | IndexError\n    \"https://#{host}/.well-known/webfinger?resource={uri}\"\n  end\n  url = template.gsub(\"{uri}\", URI.encode_www_form(account))\n  attempts.times do |i|\n    HTTP::Client.get(url) do |response|\n      case (      code = response.status_code)\n      when 200\n        mt = response.mime_type.try(&.media_type)\n        result = if mt =~ (/xml/)\n          Result.from_xml(response.body_io)\n        else\n          if mt =~ (/json/)\n            Result.from_json(response.body_io)\n          else\n            if response.body_io.peek.try(&.first) == 123\n              Result.from_json(response.body_io)\n            else\n              Result.from_xml(response.body_io)\n            end\n          end\n        end\n        return result\n      when 300, 301, 302, 303, 307, 308\n        if (tmp = response.headers[\"Location\"]?) && (url = tmp)\n          next\n        else\n          break\n        end\n      when 404\n        raise(NotFoundError.new(\"not found [#{code}]: #{url}\"))\n      else\n        raise(Error.new(\"error [#{code}]: #{url}\"))\n      end\n    end\n  end\n  raise(RedirectionError.new(\"redirection failed: #{url}\"))\nrescue ex : Socket::Addrinfo::Error\n  raise(NotFoundError.new(ex.message))\nend"}}]},{"html_id":"web_finger/WebFinger/Error","path":"WebFinger/Error.html","kind":"class","full_name":"WebFinger::Error","name":"Error","abstract":false,"superclass":{"html_id":"web_finger/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"web_finger/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"web_finger/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/web_finger/client.cr","line_number":6,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/client.cr#L6"}],"repository_name":"web_finger","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"web_finger/WebFinger/NotFoundError","kind":"class","full_name":"WebFinger::NotFoundError","name":"NotFoundError"},{"html_id":"web_finger/WebFinger/RedirectionError","kind":"class","full_name":"WebFinger::RedirectionError","name":"RedirectionError"},{"html_id":"web_finger/WebFinger/ResultError","kind":"class","full_name":"WebFinger::ResultError","name":"ResultError"}],"namespace":{"html_id":"web_finger/WebFinger","kind":"module","full_name":"WebFinger","name":"WebFinger"},"doc":"General error.","summary":"<p>General error.</p>"},{"html_id":"web_finger/WebFinger/NotFoundError","path":"WebFinger/NotFoundError.html","kind":"class","full_name":"WebFinger::NotFoundError","name":"NotFoundError","abstract":false,"superclass":{"html_id":"web_finger/WebFinger/Error","kind":"class","full_name":"WebFinger::Error","name":"Error"},"ancestors":[{"html_id":"web_finger/WebFinger/Error","kind":"class","full_name":"WebFinger::Error","name":"Error"},{"html_id":"web_finger/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"web_finger/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/web_finger/client.cr","line_number":10,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/client.cr#L10"}],"repository_name":"web_finger","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"web_finger/WebFinger","kind":"module","full_name":"WebFinger","name":"WebFinger"},"doc":"Account not found error.","summary":"<p>Account not found error.</p>"},{"html_id":"web_finger/WebFinger/RedirectionError","path":"WebFinger/RedirectionError.html","kind":"class","full_name":"WebFinger::RedirectionError","name":"RedirectionError","abstract":false,"superclass":{"html_id":"web_finger/WebFinger/Error","kind":"class","full_name":"WebFinger::Error","name":"Error"},"ancestors":[{"html_id":"web_finger/WebFinger/Error","kind":"class","full_name":"WebFinger::Error","name":"Error"},{"html_id":"web_finger/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"web_finger/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/web_finger/client.cr","line_number":14,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/client.cr#L14"}],"repository_name":"web_finger","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"web_finger/WebFinger","kind":"module","full_name":"WebFinger","name":"WebFinger"},"doc":"Redirection failed.","summary":"<p>Redirection failed.</p>"},{"html_id":"web_finger/WebFinger/Result","path":"WebFinger/Result.html","kind":"class","full_name":"WebFinger::Result","name":"Result","abstract":false,"superclass":{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"web_finger/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"web_finger/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/web_finger/result.cr","line_number":10,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L10"}],"repository_name":"web_finger","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"web_finger/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"namespace":{"html_id":"web_finger/WebFinger","kind":"module","full_name":"WebFinger","name":"WebFinger"},"doc":"A `WebFinger` query result.","summary":"<p>A <code><a href=\"../WebFinger.html\">WebFinger</a></code> query result.</p>","class_methods":[{"html_id":"from_xml(xml)-class-method","name":"from_xml","abstract":false,"args":[{"name":"xml","external_name":"xml","restriction":""}],"args_string":"(xml)","args_html":"(xml)","location":{"filename":"src/web_finger/result.cr","line_number":65,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L65"},"def":{"name":"from_xml","args":[{"name":"xml","external_name":"xml","restriction":""}],"visibility":"Public","body":"xml = (XML.parse(xml)).first_element_child\nif xml\nelse\n  raise(ResultError.new(\"empty result\"))\nend\nns = xml.namespaces\nxrd = (begin\n  key = (ns.key_for?(\"http://docs.oasis-open.org/ns/xri/xrd-1.0\")).try(&.split(\":\")).try(&.last)\n  key ? \"#{key}:\" : \"\"\nend)\nif (nn = xml.xpath_nodes(\"./#{xrd}Subject\", ns)).size > 0\n  subject = nn.first.content\nend\nif (nn = xml.xpath_nodes(\"./#{xrd}Alias\", ns)).size > 0\n  aliases = nn.reduce(Array(String).new) do |acc, n|\n    acc << n.content\n    acc\n  end\nend\nif (nn = xml.xpath_nodes(\"./#{xrd}Property\", ns)).size > 0\n  properties = nn.reduce(Hash(String, String | ::Nil).new) do |acc, n|\n    acc[n[\"type\"]] = n[\"nil\"]? ? nil : n.content\n    acc\n  end\nend\nif (nn = xml.xpath_nodes(\"./#{xrd}Link\", ns)).size > 0\n  links = nn.reduce(Hash(String, Link).new) do |acc, n|\n    link = Link.from_xml(n, ns, xrd)\n    acc[link.rel] = link\n    acc\n  end\nend\nnew(subject, aliases, properties, links)\n"}}],"constructors":[{"html_id":"new(subject:Nil|String,aliases:Nil|Array(String),properties:Nil|Hash(String,Nil|String),links:Nil|Hash(String,WebFinger::Result::Link))-class-method","name":"new","abstract":false,"args":[{"name":"subject","external_name":"subject","restriction":"::Nil | ::String"},{"name":"aliases","external_name":"aliases","restriction":"::Nil | ::Array(::String)"},{"name":"properties","external_name":"properties","restriction":"::Nil | ::Hash(::String, ::Nil | ::String)"},{"name":"links","external_name":"links","restriction":"::Nil | ::Hash(::String, ::WebFinger::Result::Link)"}],"args_string":"(subject : Nil | String, aliases : Nil | Array(String), properties : Nil | Hash(String, Nil | String), links : Nil | Hash(String, WebFinger::Result::Link))","args_html":"(subject : Nil | String, aliases : Nil | Array(String), properties : Nil | Hash(String, Nil | String), links : Nil | Hash(String, <a href=\"../WebFinger/Result/Link.html\">WebFinger::Result::Link</a>))","location":{"filename":"src/web_finger/result.cr","line_number":62,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L62"},"def":{"name":"new","args":[{"name":"subject","external_name":"subject","restriction":"::Nil | ::String"},{"name":"aliases","external_name":"aliases","restriction":"::Nil | ::Array(::String)"},{"name":"properties","external_name":"properties","restriction":"::Nil | ::Hash(::String, ::Nil | ::String)"},{"name":"links","external_name":"links","restriction":"::Nil | ::Hash(::String, ::WebFinger::Result::Link)"}],"visibility":"Public","body":"_ = allocate\n_.initialize(subject, aliases, properties, links)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(pull:JSON::PullParser)-class-method","name":"new","abstract":false,"args":[{"name":"pull","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/web_finger/result.cr","line_number":54,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L54"},"def":{"name":"new","args":[{"name":"pull","external_name":"pull","restriction":"::JSON::PullParser"}],"visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"html_id":"aliases:Array(String)|Nil-instance-method","name":"aliases","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":57,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L57"},"def":{"name":"aliases","return_type":"Array(String) | ::Nil","visibility":"Public","body":"@aliases"}},{"html_id":"aliases=(aliases:Array(String)|Nil)-instance-method","name":"aliases=","abstract":false,"args":[{"name":"aliases","external_name":"aliases","restriction":"Array(String) | ::Nil"}],"args_string":"(aliases : Array(String) | Nil)","args_html":"(aliases : Array(String) | Nil)","location":{"filename":"src/web_finger/result.cr","line_number":57,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L57"},"def":{"name":"aliases=","args":[{"name":"aliases","external_name":"aliases","restriction":"Array(String) | ::Nil"}],"visibility":"Public","body":"@aliases = aliases"}},{"html_id":"link(key)-instance-method","name":"link","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/web_finger/result.cr","line_number":115,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L115"},"def":{"name":"link","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"if (l = @links)\nelse\n  raise(ResultError.new(\"No links in result\"))\nend\nl[key]\n"}},{"html_id":"link?(key)-instance-method","name":"link?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/web_finger/result.cr","line_number":122,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L122"},"def":{"name":"link?","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"if (l = @links)\n  l.has_key?(key)\nend"}},{"html_id":"links:Hash(String,Link)|Nil-instance-method","name":"links","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":60,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L60"},"def":{"name":"links","return_type":"Hash(String, Link) | ::Nil","visibility":"Public","body":"@links"}},{"html_id":"links=(links:Hash(String,Link)|Nil)-instance-method","name":"links=","abstract":false,"args":[{"name":"links","external_name":"links","restriction":"Hash(String, Link) | ::Nil"}],"args_string":"(links : Hash(String, Link) | Nil)","args_html":"(links : Hash(String, <a href=\"../WebFinger/Result/Link.html\">Link</a>) | Nil)","location":{"filename":"src/web_finger/result.cr","line_number":60,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L60"},"def":{"name":"links=","args":[{"name":"links","external_name":"links","restriction":"Hash(String, Link) | ::Nil"}],"visibility":"Public","body":"@links = links"}},{"html_id":"properties:Hash(String,String|Nil)|Nil-instance-method","name":"properties","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":58,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L58"},"def":{"name":"properties","return_type":"Hash(String, String | ::Nil) | ::Nil","visibility":"Public","body":"@properties"}},{"html_id":"properties=(properties:Hash(String,String|Nil)|Nil)-instance-method","name":"properties=","abstract":false,"args":[{"name":"properties","external_name":"properties","restriction":"Hash(String, String | ::Nil) | ::Nil"}],"args_string":"(properties : Hash(String, String | Nil) | Nil)","args_html":"(properties : Hash(String, String | Nil) | Nil)","location":{"filename":"src/web_finger/result.cr","line_number":58,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L58"},"def":{"name":"properties=","args":[{"name":"properties","external_name":"properties","restriction":"Hash(String, String | ::Nil) | ::Nil"}],"visibility":"Public","body":"@properties = properties"}},{"html_id":"property(key)-instance-method","name":"property","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/web_finger/result.cr","line_number":102,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L102"},"def":{"name":"property","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"if (p = @properties)\nelse\n  raise(ResultError.new(\"No properties in result\"))\nend\np[key]\n"}},{"html_id":"property?(key)-instance-method","name":"property?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/web_finger/result.cr","line_number":109,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L109"},"def":{"name":"property?","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"if (p = @properties)\n  p.has_key?(key)\nend"}},{"html_id":"subject:String|Nil-instance-method","name":"subject","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":56,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L56"},"def":{"name":"subject","return_type":"String | ::Nil","visibility":"Public","body":"@subject"}},{"html_id":"subject=(subject:String|Nil)-instance-method","name":"subject=","abstract":false,"args":[{"name":"subject","external_name":"subject","restriction":"String | ::Nil"}],"args_string":"(subject : String | Nil)","args_html":"(subject : String | Nil)","location":{"filename":"src/web_finger/result.cr","line_number":56,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L56"},"def":{"name":"subject=","args":[{"name":"subject","external_name":"subject","restriction":"String | ::Nil"}],"visibility":"Public","body":"@subject = subject"}}],"types":[{"html_id":"web_finger/WebFinger/Result/Converter","path":"WebFinger/Result/Converter.html","kind":"class","full_name":"WebFinger::Result::Converter","name":"Converter","abstract":false,"superclass":{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"web_finger/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/web_finger/result.cr","line_number":43,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L43"}],"repository_name":"web_finger","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"web_finger/WebFinger/Result","kind":"class","full_name":"WebFinger::Result","name":"Result"},"class_methods":[{"html_id":"from_json(value:JSON::PullParser)-class-method","name":"from_json","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"JSON::PullParser"}],"args_string":"(value : JSON::PullParser)","args_html":"(value : JSON::PullParser)","location":{"filename":"src/web_finger/result.cr","line_number":44,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L44"},"def":{"name":"from_json","args":[{"name":"value","external_name":"value","restriction":"JSON::PullParser"}],"visibility":"Public","body":"Hash(String, Link).new.tap do |hash|\n  value.read_array do\n    link = Link.new(value)\n    hash[link.rel] = link\n  end\nend"}}]},{"html_id":"web_finger/WebFinger/Result/Link","path":"WebFinger/Result/Link.html","kind":"class","full_name":"WebFinger::Result::Link","name":"Link","abstract":false,"superclass":{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"web_finger/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"web_finger/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/web_finger/result.cr","line_number":11,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L11"}],"repository_name":"web_finger","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"web_finger/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"namespace":{"html_id":"web_finger/WebFinger/Result","kind":"class","full_name":"WebFinger::Result","name":"Result"},"class_methods":[{"html_id":"from_xml(xml,ns,xrd)-class-method","name":"from_xml","abstract":false,"args":[{"name":"xml","external_name":"xml","restriction":""},{"name":"ns","external_name":"ns","restriction":""},{"name":"xrd","external_name":"xrd","restriction":""}],"args_string":"(xml, ns, xrd)","args_html":"(xml, ns, xrd)","location":{"filename":"src/web_finger/result.cr","line_number":24,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L24"},"def":{"name":"from_xml","args":[{"name":"xml","external_name":"xml","restriction":""},{"name":"ns","external_name":"ns","restriction":""},{"name":"xrd","external_name":"xrd","restriction":""}],"visibility":"Public","body":"if (nn = xml.xpath_nodes(\"./#{xrd}Property\", ns)).size > 0\n  properties = nn.reduce(Hash(String, String | ::Nil).new) do |acc, n|\n    acc[n[\"type\"]] = n[\"nil\"]? ? nil : n.content\n    acc\n  end\nend\nif (nn = xml.xpath_nodes(\"./#{xrd}Title\", ns)).size > 0\n  titles = nn.reduce(Hash(String, String).new) do |acc, n|\n    acc[n[\"lang\"]? || \"default\"] = n.content\n    acc\n  end\nend\nnew(xml[\"rel\"], xml[\"type\"]?, xml[\"href\"]?, properties, titles, xml[\"template\"]?)\n"}}],"constructors":[{"html_id":"new(rel:String,type:Nil|String,href:Nil|String,properties:Nil|Hash(String,Nil|String),titles:Nil|Hash(String,String),template:Nil|String)-class-method","name":"new","abstract":false,"args":[{"name":"rel","external_name":"rel","restriction":"::String"},{"name":"type","external_name":"type","restriction":"::Nil | ::String"},{"name":"href","external_name":"href","restriction":"::Nil | ::String"},{"name":"properties","external_name":"properties","restriction":"::Nil | ::Hash(::String, ::Nil | ::String)"},{"name":"titles","external_name":"titles","restriction":"::Nil | ::Hash(::String, ::String)"},{"name":"template","external_name":"template","restriction":"::Nil | ::String"}],"args_string":"(rel : String, type : Nil | String, href : Nil | String, properties : Nil | Hash(String, Nil | String), titles : Nil | Hash(String, String), template : Nil | String)","args_html":"(rel : String, type : Nil | String, href : Nil | String, properties : Nil | Hash(String, Nil | String), titles : Nil | Hash(String, String), template : Nil | String)","location":{"filename":"src/web_finger/result.cr","line_number":21,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L21"},"def":{"name":"new","args":[{"name":"rel","external_name":"rel","restriction":"::String"},{"name":"type","external_name":"type","restriction":"::Nil | ::String"},{"name":"href","external_name":"href","restriction":"::Nil | ::String"},{"name":"properties","external_name":"properties","restriction":"::Nil | ::Hash(::String, ::Nil | ::String)"},{"name":"titles","external_name":"titles","restriction":"::Nil | ::Hash(::String, ::String)"},{"name":"template","external_name":"template","restriction":"::Nil | ::String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(rel, type, href, properties, titles, template)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(pull:JSON::PullParser)-class-method","name":"new","abstract":false,"args":[{"name":"pull","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/web_finger/result.cr","line_number":12,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L12"},"def":{"name":"new","args":[{"name":"pull","external_name":"pull","restriction":"::JSON::PullParser"}],"visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"html_id":"href:String|Nil-instance-method","name":"href","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":16,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L16"},"def":{"name":"href","return_type":"String | ::Nil","visibility":"Public","body":"@href"}},{"html_id":"href=(href:String|Nil)-instance-method","name":"href=","abstract":false,"args":[{"name":"href","external_name":"href","restriction":"String | ::Nil"}],"args_string":"(href : String | Nil)","args_html":"(href : String | Nil)","location":{"filename":"src/web_finger/result.cr","line_number":16,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L16"},"def":{"name":"href=","args":[{"name":"href","external_name":"href","restriction":"String | ::Nil"}],"visibility":"Public","body":"@href = href"}},{"html_id":"properties:Hash(String,String|Nil)|Nil-instance-method","name":"properties","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":17,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L17"},"def":{"name":"properties","return_type":"Hash(String, String | ::Nil) | ::Nil","visibility":"Public","body":"@properties"}},{"html_id":"properties=(properties:Hash(String,String|Nil)|Nil)-instance-method","name":"properties=","abstract":false,"args":[{"name":"properties","external_name":"properties","restriction":"Hash(String, String | ::Nil) | ::Nil"}],"args_string":"(properties : Hash(String, String | Nil) | Nil)","args_html":"(properties : Hash(String, String | Nil) | Nil)","location":{"filename":"src/web_finger/result.cr","line_number":17,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L17"},"def":{"name":"properties=","args":[{"name":"properties","external_name":"properties","restriction":"Hash(String, String | ::Nil) | ::Nil"}],"visibility":"Public","body":"@properties = properties"}},{"html_id":"rel:String-instance-method","name":"rel","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":14,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L14"},"def":{"name":"rel","return_type":"String","visibility":"Public","body":"@rel"}},{"html_id":"rel=(rel:String)-instance-method","name":"rel=","abstract":false,"args":[{"name":"rel","external_name":"rel","restriction":"String"}],"args_string":"(rel : String)","args_html":"(rel : String)","location":{"filename":"src/web_finger/result.cr","line_number":14,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L14"},"def":{"name":"rel=","args":[{"name":"rel","external_name":"rel","restriction":"String"}],"visibility":"Public","body":"@rel = rel"}},{"html_id":"template:String|Nil-instance-method","name":"template","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":19,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L19"},"def":{"name":"template","return_type":"String | ::Nil","visibility":"Public","body":"@template"}},{"html_id":"template=(template:String|Nil)-instance-method","name":"template=","abstract":false,"args":[{"name":"template","external_name":"template","restriction":"String | ::Nil"}],"args_string":"(template : String | Nil)","args_html":"(template : String | Nil)","location":{"filename":"src/web_finger/result.cr","line_number":19,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L19"},"def":{"name":"template=","args":[{"name":"template","external_name":"template","restriction":"String | ::Nil"}],"visibility":"Public","body":"@template = template"}},{"html_id":"titles:Hash(String,String)|Nil-instance-method","name":"titles","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":18,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L18"},"def":{"name":"titles","return_type":"Hash(String, String) | ::Nil","visibility":"Public","body":"@titles"}},{"html_id":"titles=(titles:Hash(String,String)|Nil)-instance-method","name":"titles=","abstract":false,"args":[{"name":"titles","external_name":"titles","restriction":"Hash(String, String) | ::Nil"}],"args_string":"(titles : Hash(String, String) | Nil)","args_html":"(titles : Hash(String, String) | Nil)","location":{"filename":"src/web_finger/result.cr","line_number":18,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L18"},"def":{"name":"titles=","args":[{"name":"titles","external_name":"titles","restriction":"Hash(String, String) | ::Nil"}],"visibility":"Public","body":"@titles = titles"}},{"html_id":"type:String|Nil-instance-method","name":"type","abstract":false,"location":{"filename":"src/web_finger/result.cr","line_number":15,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L15"},"def":{"name":"type","return_type":"String | ::Nil","visibility":"Public","body":"@type"}},{"html_id":"type=(type:String|Nil)-instance-method","name":"type=","abstract":false,"args":[{"name":"type","external_name":"type","restriction":"String | ::Nil"}],"args_string":"(type : String | Nil)","args_html":"(type : String | Nil)","location":{"filename":"src/web_finger/result.cr","line_number":15,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L15"},"def":{"name":"type=","args":[{"name":"type","external_name":"type","restriction":"String | ::Nil"}],"visibility":"Public","body":"@type = type"}}]}]},{"html_id":"web_finger/WebFinger/ResultError","path":"WebFinger/ResultError.html","kind":"class","full_name":"WebFinger::ResultError","name":"ResultError","abstract":false,"superclass":{"html_id":"web_finger/WebFinger/Error","kind":"class","full_name":"WebFinger::Error","name":"Error"},"ancestors":[{"html_id":"web_finger/WebFinger/Error","kind":"class","full_name":"WebFinger::Error","name":"Error"},{"html_id":"web_finger/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"web_finger/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"web_finger/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/web_finger/result.cr","line_number":6,"url":"https://github.com/toddsundsted/web_finger/blob/72865e06ba291a912c5101b3ca020328cfea50b0/src/web_finger/result.cr#L6"}],"repository_name":"web_finger","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"web_finger/WebFinger","kind":"module","full_name":"WebFinger","name":"WebFinger"},"doc":"`Result` error.","summary":"<p><code><a href=\"../WebFinger/Result.html\">Result</a></code> error.</p>"}]}]}}